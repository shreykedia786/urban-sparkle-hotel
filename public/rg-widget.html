<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>RateGain Booking Widget</title>
  <link href="https://ibe.rategain.com/widget/index.css" rel="stylesheet" />
  <style>
    html, body { 
      margin: 0; 
      padding: 0; 
      background: transparent; 
      overflow: visible !important;
      z-index: 99999 !important;
      height: auto;
      min-height: 200px;
    }
    #rg-booking-widget {
      z-index: 99999 !important;
      position: relative !important;
      min-height: 200px;
      display: block;
      width: 100%;
    }
    /* Ensure dropdowns appear above everything */
    .rg-dropdown, .rg-calendar, .rg-popover, .rg-select-dropdown {
      z-index: 999999 !important;
      position: fixed !important;
    }
  </style>
</head>
<body>
  <div 
    id="rg-booking-widget"
    data-brandID="937bf5e9-7f12-4e04-be25-5e3e823242b7"
    data-chainID="d9c3cc24-da05-4697-a759-3bcea2872153"
    data-backgroundprimarycolor="#1e293b"
    data-backgroundsecondarycolor="#334155"
    data-widgetFontColor="#ffffff"
    data-widgetSearchFontColorButton="#ffffff"
    data-widgetSearchColorButton="#937e27"
    data-widgetSearchFontColorHoverstate="#ffffff"
    data-widgetSearchColorHoverState="#b89f2a"
  >
    <script src="https://ibe.rategain.com/widget/index.js"></script>
  </div>
  <script>
    console.log('RG Widget HTML loaded');
    
    (function(){
      function measure(){
        var root = document.getElementById('rg-booking-widget');
        if(!root) {
          console.log('RG Widget root element not found');
          return 200;
        }
        var rect = root.getBoundingClientRect();
        var h = Math.ceil(rect.height || 0);
        if(!h || h < 80){
          h = Math.max(
            root.offsetHeight || 0,
            root.scrollHeight || 0,
            document.body.scrollHeight,
            document.documentElement.scrollHeight,
            200 // minimum fallback
          );
        }
        console.log('RG Widget measured height:', h);
        return h;
      }
      
      function send(){
        var h = measure();
        try { 
          parent.postMessage({ newHeight: h }, '*');
          console.log('RG Widget sent height message:', h);
        } catch(e){
          console.error('RG Widget height message failed:', e);
        }
      }
      
      // Initialize ResizeObserver if available
      if (window.ResizeObserver) {
        var ro = new ResizeObserver(send);
        ro.observe(document.body);
      }
      
      // Initialize MutationObserver
      var mo = new MutationObserver(send);
      mo.observe(document.body, {childList:true, subtree:true, attributes:true});
      
      // Send initial height
      window.addEventListener('load', send);
      setTimeout(send, 100);
      setTimeout(send, 500);
      setTimeout(send, 1000);
      setInterval(send, 2000);
      
      // Force initial measurement
      send();
      
      console.log('RG Widget initialization complete');
    })();
  </script>
</body>
</html>